<!doctype html>
<html>
<body>
  <style>
    a{display:block;}
    svg{background:#eee;}
    circle{background:green;} 
    pre {border: 1px solid #ccc; background:#efefef; float:left; padding: 1em;}
    .bar{
      border: 1px solid #000;
      background: DarkRed;
      color: #fff;
      padding: 5px;
      margin-bottom:2px;
      font-size: 12px;
      text-align: right;
      display: inline-block;
    }
    .label {
      font-size: 12px;
      color:#444;
      padding-right: 1em;
      width: 20em;
      text-align: right;
      display: inline-block;
    }
  </style>
  <a href="http://bost.ocks.org/mike/join/">http://bost.ocks.org/mike/join/</a>
  <pre></pre>
  <div style="clear:both"></div>
<script src="lib/jquery-1.7.2.min.js"></script>
<script src="lib/underscore.js"></script>
<script src="lib/d3.v2.js"></script>
<script>
  const SVG_HEIGHT = 300;
  const SVG_WIDTH = 700;
  const MARGIN = 50;
  const NUM_CIRCLES = 100;
  
  function draw(data) {
    console.log ('data', data);
    d3.select('body')
      .append('svg')
        .attr('height', SVG_HEIGHT)
        .attr('width', SVG_WIDTH)
      .selectAll('circle')
      .data(data)
      .enter()
      .append('circle')



    // value of x_extent: [1.92, 10.3] 
    x_extent = d3.extent(data, function(d){return d.collision_with_injury});
    x_scale = 
      d3.scale.linear()
        .range([MARGIN, SVG_WIDTH - MARGIN])
        .domain(x_extent);
              
    console.log ('x_extent', x_extent);
    console.log ('x_scale', x_scale);
  }



  $('pre').append('' + draw)
</script>
<script>
  d3.json('data/bus_perf.json', draw);
</script>
</body>
</html>
